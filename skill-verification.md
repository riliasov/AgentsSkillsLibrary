---
name: verification
description: Mandatory self-check protocols before delivering work. Ensures quality through testing, linting, and visual validation.
---

# Verification Protocol

Перед вызовом `notify_user` агент **обязан** проверить результат своей работы. Это критично для качества и снижает количество итераций.

## Протокол самопроверки

### 1. Для UI/Dashboard изменений
- **Tool**: Используй `browser_subagent` для визуальной проверки
- **Действия**:
  - Открой страницу в браузере
  - Сделай скриншот результата
  - Запиши видео основных user flows (если UI интерактивный)
  - Проверь responsive design (если релевантно)
- **Критерии**: UI должен соответствовать требованиям, без визуальных багов

### 2. Для логики/API/Backend
- **Tool**: Пиши и запускай тесты через `run_command`
- **Действия**:
  - Напиши unit/integration тесты для новой функциональности
  - Запусти существующий test suite: `pytest`, `npm test`, и т.д.
  - Убедись, что все тесты проходят
- **Критерии**: Все тесты зелёные, coverage не упал

### 3. Для качества кода
- **Tools**: Линтеры и type checkers
- **Действия**:
  - Запусти `ruff check` для Python
  - Запусти `mypy` для type checking (если используется)
  - Запусти `eslint` для JavaScript/TypeScript
  - Исправь все найденные проблемы
- **Критерии**: Нет ошибок линтера, типы корректны

### 4. Для документации/README
- **Actions**: Проверь читаемость и корректность
- **Действия**:
  - Прочитай созданный текст от начала до конца
  - Проверь корректность ссылок
  - Убедись, что примеры кода работают
- **Критерии**: Текст понятен, ссылки рабочие, примеры валидны

## Чек-лист перед notify_user

- [ ] Код запускается без ошибок
- [ ] Тесты написаны и проходят (для логики)
- [ ] Линтеры не показывают ошибок
- [ ] UI проверен визуально (для frontend)
- [ ] Документация обновлена (если нужно)
- [ ] Git commit сделан с правильным сообщением

> [!IMPORTANT]
> Если хотя бы один пункт не выполнен — **не вызывай notify_user**. Доработай код и проверь снова.

## Исключения

Можешь пропустить проверку только если:
- Пользователь **явно** попросил не проверять
- Изменения тривиальны (например, исправление опечатки в комментарии)
- Проверка технически невозможна (например, нет доступа к runtime)

Во всех остальных случаях — **проверка обязательна**.
